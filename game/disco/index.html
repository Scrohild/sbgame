<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>金澎蹦迪室</title>
		<style type="text/css">
			body{
				margin-left: auto;
				margin-right: auto;
				width: 800px;
				text-align: center;
				background-color: #225555;
			}
			h1{
				color: #00aaff;
			}
			button{
				background-color: rgba(0, 0, 0, 0);
				border-color: #306060;
				color: #00aaff;
				width: 200px;
				height: 30px;
			}
			#d{
				width: 300px;
				height: 300px;
				margin-left: 250px;
				margin-top: 80px;
			}
		</style>
	</head>
	<body>
		<script type="text/javascript">
			window.alert("光敏癫痫警告!");
			window.alert("本网站概不负责");
			window.alert("请确认音量在可接受范围");
			
			//视觉效果
			var k=0;
			var h=0;
			function vision() {
				k++;
				function sleep(ms) {
					return new Promise(resolve => setTimeout(resolve, ms));
				}
				async function demo() {
					while(k%2==1){
						await sleep(40);
						h++;
						//灯光
						if(h%4==0){
							var r =  parseFloat(Math.random()*255);
							var g =  parseFloat(Math.random()*255);
							var b =  parseFloat(Math.random()*255);
					
							document.body.style.backgroundColor= "rgb("+r+", "+g+", "+b+")";
							
						}
						//移动
						var x = 250;
						var y = 80;
						var dx = parseFloat(Math.random()*40) - 20;
						var dy = parseFloat(Math.random()*40) - 20;
						
						x+=dx;
						y+=dy;
					
						document.getElementById("d").style.marginLeft= x + "px";
						document.getElementById("d").style.marginTop= y + "px";
					}
				}
				demo();
			}
			
			//换歌
			var link = [
				"http://music.163.com/song/media/outer/url?id=1831818123.mp3",
				"http://music.163.com/song/media/outer/url?id=512640295.mp3",
				"http://music.163.com/song/media/outer/url?id=41644447.mp3",
				"http://music.163.com/song/media/outer/url?id=1293953588.mp3",
				"http://music.163.com/song/media/outer/url?id=26244414.mp3",
				"http://music.163.com/song/media/outer/url?id=491686205.mp3"
			];
			var i=-1;
			function change() {
				i++;
				var j= i%(link.length);
				document.getElementById("a").src= link[j];
				document.getElementById("a").play();
			}
		</script>
		
		<audio id="a"; src=""></audio>
		<h1>金澎蹦迪室</h1>
		<button id="b"; onclick="change()">换一首</button>
		<br /><br /><br />
		<button id="c"; onclick="vision()">视觉效果</button>
		<br />
		<div id="d">
			<img src="./jp.png"; width="220px"; height="220px" />
		</div>
	</body>
</html>
